@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --header-height: 4.5rem;
  --footer-height: 3rem;
  --color-primary: #2c4c9c;
  --color-primary-dark: #1e3a7b;
  --color-secondary: #0066cc;
  --color-accent: #e63946;
  --color-background: #f8fafc;
  --color-text: #1e293b;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%; /* Ensure html and body take full height */
  margin: 0; /* Reset default margin */
  padding: 0; /* Reset default padding */
}

body {
  font-family: 'Inter', sans-serif;
  /* overflow: hidden; Removed - Likely causing issues with admin layout scrolling */
  /* background-color: var(--color-background); Removed static bg color */
  color: var(--color-text);
  position: relative; /* Needed for z-index stacking & particle positioning */
}

#root {
  height: 100%; /* Ensure root div takes full height */
}

/* Keep gradient animation definition for potential use elsewhere */
@keyframes gradientAnimation {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Force particle canvas background to be transparent */
#tsparticles > canvas {
  background-color: transparent !important;
}

/* Main Layout */
.signage-layout {
  display: flex;
  flex-direction: column;
  height: 100vh; /* Full viewport height */
  background-color: transparent; /* Ensure this layer doesn't block body gradient */
  width: 100vw;
  overflow: hidden; /* Prevent body scroll */
}

/* InfoBar styles (Header) */
.info-bar {
  background: linear-gradient(to right, var(--color-primary-dark), var(--color-primary));
  color: white;
  padding: 0 1.5rem;
  display: flex;
  align-items: center;
  gap: 1.5rem;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  height: var(--header-height); /* Use variable */
  flex-shrink: 0;
  z-index: 100;
}

.info-bar-logo {
  height: 2.5rem;
  flex-shrink: 0;
}

.info-bar-datetime {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  flex-shrink: 0;
}

.info-bar-time {
  font-size: 1.25rem;
  font-weight: 600;
}

.info-bar-date {
  font-size: 0.8rem;
  opacity: 0.8;
}

.info-bar-weather {
  font-size: 1rem;
  font-weight: 600; /* Slightly bolder */
  white-space: nowrap;
  flex-shrink: 0;
  background-color: rgba(255, 255, 255, 0.15); /* Slightly more visible background */
  padding: 0.4rem 0.8rem;
  border-radius: 0.5rem;
}

.info-bar-ticker-container {
  flex: 1;
  overflow: hidden;
  min-width: 0;
}

/* Main Content Area (Slideshow) */
.signage-main-content {
  flex-grow: 1; /* Allow content to fill remaining space */
  position: relative; /* For positioning animated slides */
  overflow: hidden; /* Hide overflowing slide content */
  height: calc(100vh - var(--header-height) - var(--footer-height));
  display: flex;
  align-items: stretch; /* Stretch children vertically */
  justify-content: center; /* Center children horizontally */
}

/* Wrapper for the animated slide inside main content */
.slide-wrapper {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  display: flex;
  align-items: stretch;
}

/* Slide styles */
.slide {
  height: 100%; /* Ensure slide fills its container */
  width: 100%;
  display: flex;
  flex-direction: column;
  /* overflow: hidden; Removed */
  overflow-y: auto; /* Allow vertical scrolling if needed */
  box-sizing: border-box;
  position: relative; /* Needed for pseudo-element positioning */
  padding-bottom: calc(var(--footer-height) + 1rem); /* Add padding at bottom to prevent overlap with footer */
}

/* Product slide */
.product-slide {
  padding: 1rem 2rem; /* Add padding specifically here */
}

.product-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3rem;
  max-width: 1600px;
  margin: 0 auto;
  flex-grow: 1; /* Allow content to take space */
  align-items: center;
  min-height: 0; /* Prevent overflow issues with flex-grow */
  margin-bottom: 1.5rem; /* Add space below main content grid */
  max-height: calc(100vh - var(--header-height) - var(--footer-height) - 5rem); /* Limit height to prevent overflow */
}

/* Updated Product Image Container styles */
.product-image-container {
  background-color: transparent;
  border-radius: 1rem;
  padding: 0.5rem; /* Reduced from 2rem to give more space to the image */
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 400px; /* Added minimum height to ensure container doesn't collapse */
  flex: 1; /* Allow container to grow and fill available space */
}

/* Keep existing product-image styles, but add stronger scale on hover */
.product-image {
  width: 100%;
  height: 100%;
  object-fit: contain; /* Still maintain aspect ratio */
  transition: transform 0.35s ease-out;
  animation: imagePulse 4s ease-in-out infinite;
}

.product-details {
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 2rem 3rem;
  background-color: rgba(248, 250, 252, 0.98); /* Increased opacity for better contrast */
  backdrop-filter: blur(20px); /* Increased blur for more solid background */
  border-radius: 1rem; /* Match image container */
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); /* Stronger shadow for better separation */
  border: 1px solid rgba(0, 0, 0, 0.08); /* Add subtle border */
  overflow-y: auto; /* Allow vertical scrolling */
  max-height: 100%; /* Limit height to container */
  padding-right: 3.5rem; /* Add space for scrollbar */
}

/* Optional: Increase hover effect if desired */
.product-image-container:hover .product-image {
  transform: scale(1.1); /* Slightly larger hover effect */
}

.product-category {
  color: #0055b3; /* Slightly darker text */
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
  display: inline-block;
  padding: 0.2rem 0.6rem;
  background-color: rgba(0, 102, 204, 0.15); /* Slightly darker background */
  border-radius: 0.375rem;
  border: 1px solid rgba(0, 102, 204, 0.3); /* Slightly darker border */
}

.product-name {
  color: #1e293b; /* slate-800 */
  font-size: 3.2rem;
  font-weight: 700;
  margin-bottom: 1.2rem;
  line-height: 1.15;
  overflow-wrap: break-word;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1); /* Subtle dark shadow */
}

.product-description {
  overflow-wrap: break-word; /* Allow wrapping long descriptions */
  font-size: 1.2rem; /* Slightly larger */
  margin-bottom: 2rem; /* More space below */
  line-height: 1.6;
  color: #334155; /* Darker text color (slate-700) */
}

.product-price {
  font-size: 2.8rem; /* Slightly larger */
  font-weight: 700;
  color: #0055b3; /* Slightly darker blue for better contrast */
  margin-bottom: 0.5rem;
  line-height: 1.1;
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.05); /* Subtle text shadow */
}

.product-original-price {
  font-size: 1.4rem;
  text-decoration: line-through;
  color: #64748b;
  margin-bottom: 0.5rem;
}

.product-discount {
  background-color: var(--color-accent);
  color: white;
  font-weight: 600;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  display: inline-block;
  margin-bottom: 1.5rem;
}

.product-tiers {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
  margin-top: 1.5rem;
  max-height: 12rem; /* Set reasonable max height */
  overflow-y: auto; /* Allow scrolling if many tiers */
  margin-bottom: 1rem; /* Space below */
}

.product-tier {
  background-color: #e2e8f0; /* Slightly darker background (slate-200) */
  border-radius: 0.5rem;
  padding: 0.9rem 1.2rem; /* Larger padding */
  border: 1px solid rgba(0, 0, 0, 0.05); /* Add subtle border */
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); /* Add subtle shadow */
}

.product-tier-name {
  font-weight: 600;
  font-size: 1.1rem; /* Slightly larger */
  color: #1e293b; /* Darker text (slate-800) */
}

.product-tier-price {
  color: #0055b3; /* Slightly darker blue */
  font-weight: 700;
  font-size: 1.1rem; /* Slightly larger */
}

.product-special-banner {
  background-color: var(--color-accent);
  color: white;
  text-align: center;
  padding: 1rem;
  font-size: 1.5rem;
  font-weight: 700;
  margin-top: 1.5rem; /* Space above banner */
  flex-shrink: 0; /* Ensure it doesn't shrink */
  position: relative; /* Regular positioning */
  width: 100%; /* Full width */
  z-index: 10; /* Above other content */
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.1);
}

/* Category slide - Redesigned */
.category-slide {
  gap: 1rem;
  align-items: center;
  padding: 1rem 2rem;
}

.category-header {
  background-color: transparent;
  color: white;
  padding: 0.5rem 0;
  text-align: center;
  flex-shrink: 0;
  width: 100%;
  max-width: 1200px;
}

.category-title {
  font-size: 2.2rem;
  font-weight: 700;
  color: var(--color-primary-dark); /* Dark blue title */
  margin-bottom: 0.1rem;
  line-height: 1.1;
}

.category-description {
  font-size: 1rem;
  opacity: 0.8;
  color: #475569; /* Darker grey description */
  max-width: 800px;
  margin: 0 auto;
  line-height: 1.2;
}

.category-products {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
  width: 100%;
  max-width: 1400px;
  flex-grow: 1;
  overflow-y: auto;
  padding: 0.5rem;
  min-height: 0;
}

/* Category product cards - fixed with flexible height */
.category-product {
  background-color: rgba(255, 255, 255, 0.97);
  backdrop-filter: blur(16px);
  border-radius: 0.75rem;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.18);
  display: flex;
  flex-direction: column;
  transition: transform 0.25s ease-out, box-shadow 0.25s ease-out;
  height: auto; /* Allow height to adjust to content */
  min-height: 22rem; /* Provide minimum height for consistency */
  max-height: 32rem; /* Set maximum height */
  overflow: hidden; /* Hide overflow from container */
}

/* Category product image container - fixed height for consistency */
.category-product-image {
  height: 14rem; /* Fixed height for image area */
  min-height: 14rem; /* Ensure minimum height */
  flex-shrink: 0; /* Prevent image area from shrinking */
  background-color: rgba(241, 245, 249, 0.9);
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  padding: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.category-product-image img {
  max-height: 100%;
  max-width: 100%;
  object-fit: contain;
}

/* Category product details - scrollable content */
.category-product-details {
  padding: 1rem 1.2rem;
  display: flex;
  flex-direction: column;
  flex: 1; /* Take remaining space */
  overflow-y: auto; /* Allow vertical scrolling */
  min-height: 0; /* Allow flex container to shrink */
}

/* Category product name - ensure clean truncation */
.category-product-name {
  font-size: 1.5rem;
  font-weight: 600;
  color: #1e3a7b;
  margin-bottom: 0.5rem;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2; /* Limit to 2 lines */
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.05); /* Subtle shadow for better text separation */
}

/* Category product description - better truncation with fade effect */
.category-product-description {
  font-size: 1.05rem;
  color: #334155;
  line-height: 1.5;
  margin-bottom: 0.75rem;
  overflow-y: auto;
  max-height: 7.5rem; /* About 5 lines of text */
  padding-right: 0.5rem; /* Space for scrollbar */
  /* Add fade-out effect at bottom */
  mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
  -webkit-mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
}

/* Category product price - always at bottom */
.category-product-price {
  font-size: 1.4rem;
  font-weight: 700;
  color: #0055b3;
  margin-top: auto; /* Push to bottom */
  padding-top: 0.75rem; /* Space above */
  border-top: 1px solid rgba(0, 0, 0, 0.05);
  display: flex; /* Use flexbox for layout */
  flex-direction: column; /* Stack prices vertically */
  align-items: flex-start; /* Align prices to the left */
  gap: 0.1rem; /* Add small gap between prices */
  flex-shrink: 0; /* Prevent shrinking */
}

.category-product-price span {
  color: #475569; /* Darker gray (slate-600) */
  opacity: 0.9; /* Less transparent */
  text-decoration: line-through;
  font-size: 0.9rem;
  font-weight: 500;
}

/* Make discounted price red when original price span exists */
.category-product-price:has(span) {
  color: var(--color-accent); /* Red for discounted price */
}

/* Keep original price span grey even when discounted price is red */
.category-product-price:has(span) span {
  color: #475569; /* Override back to darker grey */
  opacity: 0.9; /* Less transparent */
}

/* Category card hover effect */
.category-product:hover {
  transform: translateY(-7px) scale(1.02); /* Slightly more dramatic hover effect */
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.25); /* Stronger shadow on hover */
}

/* Special banner for category products */
.category-product .product-special-banner {
  padding: 0.4rem 0.8rem; /* Reduced padding */
  font-size: 0.8rem; /* Smaller font */
  font-weight: 600; /* Slightly less bold */
  background-color: var(--color-accent);
  color: white;
  text-align: center;
  margin-top: auto; /* Push to bottom */
  flex-shrink: 0;
  width: 100%;
}

/* Announcement slide */
.announcement-slide {
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative; /* Needed for pseudo-element */
  overflow: hidden; /* Ensure pseudo-element doesn't overflow */
}

/* Subtle background overlay for focus */
.announcement-slide::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle at center, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.4) 70%, rgba(0, 0, 0, 0.7) 100%),
              linear-gradient(135deg, var(--color-primary-dark), var(--color-primary)); /* Combine radial with original gradient */
  z-index: -1; /* Place behind content but above main animated background */
  opacity: 0.8; /* Adjust opacity as needed */
}

/* Explicitly set title and content color to white for contrast */
.announcement-title,
.announcement-content {
  color: white !important; /* Use !important to ensure override if needed */
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); /* Stronger shadow for better contrast */
}

.announcement-title {
  font-size: 4rem;
  font-weight: 900; /* Make title bolder */
  margin-bottom: 2rem;
}

.announcement-content {
  font-size: 2rem;
  max-width: 1000px;
  line-height: 1.5;
}

/* Add glow and float effect to announcement image */
.announcement-slide .announcement-image {
  filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.5)); /* White glow */
  animation: imageFloat 6s ease-in-out infinite; /* Add slow float animation */
}

/* Background logo watermark for Product, Category, and Announcement slides */
.product-slide::before,
.category-slide::before,
.announcement-slide::before { /* Added .announcement-slide::before */
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%); /* Center the pseudo-element */
  width: 40%; /* Adjust size as needed */
  height: 40%; /* Adjust size as needed */
  background-image: url('./assets/bms-logo-watermark.svg'); /* Use relative path from src/index.css */
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  opacity: 0.04; /* Very low opacity for watermark effect */
  z-index: -1; /* Place behind slide content */
}

/* Admin button styles (within footer) */
.admin-button {
  background-color: rgba(255, 255, 255, 0.8); /* Lighter background */
  color: var(--color-primary-dark); /* Dark text */
  border: 1px solid rgba(0, 0, 0, 0.1); /* Subtle border */
  padding: 0.4rem 1rem; /* Reduced vertical padding */
  font-size: 0.85rem; /* Slightly smaller font */
  border-radius: 0.6rem; /* Slightly less rounded */
  cursor: pointer;
  font-weight: 500; /* Less bold */
  transition: all 0.2s ease-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); /* Reduced shadow */
  flex-shrink: 0; /* Prevent buttons shrinking */
  line-height: 1.4; /* Adjust line height to fit padding */
  min-height: unset; /* Remove min-height from TV optimization */
}

.admin-button:hover {
  background-color: white; /* White background on hover */
  transform: translateY(-1px); /* Smaller lift effect */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15); /* Adjusted hover shadow */
}

/* Slide indicators (within footer) */
.slide-indicators {
  display: flex;
  gap: 0.6rem; /* Slightly more gap */
  align-items: center;
  margin: 0 1.5rem; /* Add horizontal margin to create space */
  flex-shrink: 0; /* Prevent indicators from shrinking if space is tight */
}

.slide-indicator {
  width: 0.5rem; /* Make indicators square */
  height: 0.5rem; /* Make indicators square */
  background-color: rgba(255, 255, 255, 0.3);
  border-radius: 1px; /* Minimal rounding for square */
  border: none;
  padding: 0;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.2s;
}

.slide-indicator.active {
  background-color: rgba(255, 255, 255, 0.8);
  transform: scale(1.1);
}

/* Ticker animation */
.ticker-wrap {
  width: 100%;
  overflow: hidden;
}

.ticker {
  display: inline-block;
  white-space: nowrap;
  padding-right: 100%;
  animation: ticker 45s linear infinite; /* Slower ticker */
}

@keyframes ticker {
  0% { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}

/* Footer layout adjustments */
.footer {
  background: linear-gradient(to right, var(--color-primary-dark), var(--color-primary));
  color: white;
  display: flex;
  align-items: center;
  justify-content: space-between; /* Distribute space */
  padding: 0 1.5rem;
  height: var(--footer-height); /* Use variable */
  font-size: 0.8rem;
  bottom: 0;
  left: 0;
  width: 100%;
  z-index: 100;
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
  flex-shrink: 0; /* Prevent footer from shrinking */
  position: sticky; /* Keep footer fixed at bottom */
}

.footer-content {
  flex-grow: 1; /* Allow text to take up extra space */
  text-align: left;
  flex-shrink: 1; /* Allow text to shrink if needed */
  min-width: 0; /* Prevent text overflow issues */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis; /* Add ellipsis if text is too long */
}

/* Admin Controls within Footer */
.footer .admin-controls {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  flex-shrink: 0;
  opacity: 0; /* Start hidden */
  pointer-events: none; /* Start non-interactive */
  transition: opacity 0.3s ease-in-out; /* Fade transition */
}

/* Show admin controls in footer when class is present */
.footer .admin-controls.controls-visible {
  opacity: 1;
  pointer-events: auto;
}

/* Loading Animation Styles */
.loading-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: fixed;
  inset: 0;
  background: linear-gradient(-45deg, #e0f2fe, #ffffff, #cae9fc, #ffffff); /* Match main background */
  background-size: 400% 400%;
  animation: gradientAnimation 25s ease infinite;
  z-index: 200; /* Ensure it's above everything */
}

.loading-content {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Fading Blocks Loader Styles */
.fading-blocks-loader {
  width: 48px; /* Adjust size as needed */
  height: 48px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 4px;
}

.fading-blocks-loader .block {
  background-color: var(--color-primary);
  animation: fadeGrid 1.3s infinite ease-in-out;
}

/* Stagger animation delays */
.fading-blocks-loader .block:nth-child(1) { animation-delay: 0.2s; }
.fading-blocks-loader .block:nth-child(2) { animation-delay: 0.3s; }
.fading-blocks-loader .block:nth-child(3) { animation-delay: 0.4s; }
.fading-blocks-loader .block:nth-child(4) { animation-delay: 0.1s; }
.fading-blocks-loader .block:nth-child(5) { animation-delay: 0.2s; }
.fading-blocks-loader .block:nth-child(6) { animation-delay: 0.3s; }
.fading-blocks-loader .block:nth-child(7) { animation-delay: 0.0s; }
.fading-blocks-loader .block:nth-child(8) { animation-delay: 0.1s; }
.fading-blocks-loader .block:nth-child(9) { animation-delay: 0.2s; }

@keyframes fadeGrid {
  0%, 70%, 100% {
    transform: scale3D(1, 1, 1);
    opacity: 1;
  } 35% {
    transform: scale3D(0, 0, 1);
    opacity: 0;
  }
}

.loading-text {
  margin-top: 1.5rem;
  font-size: 1.25rem;
  font-weight: 500;
  color: var(--color-primary-dark);
}

/* Keyframes for subtle image pulse */
@keyframes imagePulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

/* Keyframes for image float animation */
@keyframes imageFloat {
  0% { transform: translateY(0); }
  50% { transform: translateY(-10px); } /* Adjust float height */
  100% { transform: translateY(0); }
}

/* Responsive adjustments */
@media screen and (max-width: 1200px) {
  .category-product {
    min-height: 20rem; /* Slightly smaller on medium screens */
  }
  
  .category-product-image {
    height: 12rem;
    min-height: 12rem;
  }
}

@media screen and (max-width: 768px) {
  .product-content {
    grid-template-columns: 1fr; /* Stack vertically on smaller screens */
    gap: 2rem;
  }
  
  .category-products {
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); /* Smaller cards on small screens */
  }
  
  .category-product-name {
    font-size: 1.25rem; /* Smaller font on small screens */
  }
}

/* Responsive hover effect that works on touch devices */
@media (hover: hover) {
  .category-product:hover {
    transform: translateY(-7px) scale(1.02);
  }
}
